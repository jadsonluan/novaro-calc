export type Element =
  | "Neutral"
  | "Water"
  | "Earth"
  | "Fire"
  | "Wind"
  | "Poison"
  | "Holy"
  | "Shadow"
  | "Ghost"
  | "Undead";

export const ELEMENTS: Element[] = [
  "Neutral",
  "Water",
  "Earth",
  "Fire",
  "Wind",
  "Poison",
  "Holy",
  "Shadow",
  "Ghost",
  "Undead",
];

// ROW: Attacker Property
// COL: Target Property
const ELEMENTS_LV1 = [
  [100, 100, 100, 100, 100, 100, 100, 100, 90, 100],
  [100, 25, 100, 90, 150, 150, 100, 100, 100, 100],
  [100, 100, 25, 150, 90, 150, 100, 100, 100, 100],
  [100, 150, 90, 25, 100, 150, 100, 100, 100, 100],
  [100, 90, 150, 100, 25, 150, 100, 100, 100, 100],
  [100, 150, 150, 150, 150, 0, 75, 75, 75, 75],
  [100, 100, 100, 100, 100, 75, 0, 125, 90, 125],
  [100, 100, 100, 100, 100, 75, 125, 0, 90, 0],
  [90, 100, 100, 100, 100, 75, 100, 100, 125, 100],
  [100, 100, 100, 125, 100, 75, 125, -25, 100, 0],
];

const ELEMENTS_LV2 = [
  [100, 100, 100, 100, 100, 100, 100, 100, 70, 100],
  [100, 0, 100, 80, 175, 150, 100, 100, 100, 100],
  [100, 100, 0, 175, 80, 150, 100, 100, 100, 100],
  [100, 175, 80, 0, 100, 150, 100, 100, 100, 80],
  [100, 80, 175, 100, 0, 150, 100, 100, 100, 100],
  [100, 150, 150, 150, 150, 0, 75, 75, 75, 50],
  [100, 100, 100, 100, 100, 75, -25, 150, 80, 150],
  [100, 100, 100, 100, 100, 75, 150, -25, 80, 0],
  [70, 100, 100, 100, 100, 75, 100, 100, 150, 125],
  [100, 100, 100, 150, 100, 50, 150, -50, 125, 0]
]

const ELEMENTS_LV3 = [
  [100, 100, 100, 100, 100, 100, 100, 100, 50, 100],
  [100, -25, 100, 70, 200, 125, 100, 100, 100, 100],
  [100, 100, -25, 200, 70, 125, 100, 100, 100, 100],
  [100, 200, 70, -25, 100, 125, 100, 100, 100, 70],
  [100, 70, 200, 100, -25, 125, 100, 100, 100, 100],
  [100, 125, 125, 125, 125, 0, 50, 50, 50, 25],
  [100, 100, 100, 100, 100, 50, -50, 175, 70, 175],
  [100, 100, 100, 100, 100, 50, 175, -50, 70, 0],
  [50, 100, 100, 100, 100, 50, 100, 100, 175, 150],
  [100, 100, 100, 175, 100, 25, 175, -75, 150, 0]
];

const ELEMENTS_LV4 = [
  [100, 100, 100, 100, 100, 100, 100, 100, 0, 100],
  [100, -50, 100, 60, 200, 125, 100, 100, 100, 100],
  [100, 100, -50, 200, 60, 125, 100, 100, 100, 100],
  [100, 200, 60, -50, 100, 125, 100, 100, 100, 60],
  [100, 60, 200, 100, -50, 125, 100, 100, 100, 100],
  [100, 125, 125, 125, 125, 0, 50, 50, 50, -25],
  [100, 100, 100, 100, 100, 50, -100, 200, 60, 200],
  [100, 100, 100, 100, 100, 50, 200, -100, 60, 0],
  [0, 100, 100, 100, 100, 50, 100, 100, 200, 175],
  [100, 100, 100, 200, 100, -100, 200, -100, 175, 0]
];

const ELEMENT_TABLES = [ELEMENTS_LV1, ELEMENTS_LV2, ELEMENTS_LV3, ELEMENTS_LV4];

export function getPropertyModifier(
  weaponElement: Element,
  monsterElement: Element,
  monsterElementLevel: number,
  monsterDebuffs: string[]
) {
  const table = ELEMENT_TABLES[monsterElementLevel - 1];
  const weaponElementIndex = ELEMENTS.indexOf(weaponElement);
  const monsterElementIndex = ELEMENTS.indexOf(monsterElement);

  let mod = table[monsterElementIndex][weaponElementIndex];

  if (monsterDebuffs.includes("oratio") && weaponElement === "Holy") {
    mod += 20;
  }

  return mod / 100;
}
